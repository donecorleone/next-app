var e=require("@studio-freight/hamo"),r=require("@studio-freight/lenis"),t=require("prop-types"),n=require("react"),o=require("zustand");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=/*#__PURE__*/a(r),i=/*#__PURE__*/a(t),c=/*#__PURE__*/a(n);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},f.apply(this,arguments)}var l=["children","root","options","autoRaf","rafPriority"],s=n.createContext(),d=o.create(function(){return{}}),p=n.forwardRef(function(r,t){var o=r.children,a=r.root,i=void 0!==a&&a,p=r.options,v=void 0===p?{}:p,b=r.autoRaf,y=void 0===b||b,k=r.rafPriority,h=void 0===k?0:k,C=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r.indexOf(t=a[n])>=0||(o[t]=e[t]);return o}(r,l),m=n.useRef(),R=n.useRef(),g=n.useState(),x=g[0],E=g[1],O=n.useRef([]),j=n.useCallback(function(e,r){O.current.push({callback:e,priority:r}),O.current.sort(function(e,r){return e.priority-r.priority})},[]),q=n.useCallback(function(e){O.current=O.current.filter(function(r){return r.callback!==e})},[]);n.useImperativeHandle(t,function(){return x},[x]),n.useEffect(function(){var e=new u.default(f({},v,!i&&{wrapper:m.current,content:R.current}));return E(e),function(){e.destroy(),E(void 0)}},[i,JSON.stringify(v)]),e.useFrame(function(e){y&&(null==x||x.raf(e))},h),n.useEffect(function(){i&&x&&d.setState({lenis:x,addCallback:j,removeCallback:q})},[i,x,j,q]);var L=n.useCallback(function(e){for(var r=0;r<O.current.length;r++)O.current[r].callback(e)},[]);return n.useEffect(function(){if(x)return x.on("scroll",L),function(){x.off("scroll",L)}},[x,L]),/*#__PURE__*/c.default.createElement(s.Provider,{value:{lenis:x,addCallback:j,removeCallback:q}},i?o:/*#__PURE__*/c.default.createElement("div",f({ref:m},C),/*#__PURE__*/c.default.createElement("div",{ref:R},o)))});p.displayName="ReactLenis",p.propTypes={children:i.default.node,root:i.default.bool,options:i.default.object,autoRaf:i.default.bool,rafPriority:i.default.number},exports.Lenis=p,exports.LenisContext=s,exports.ReactLenis=p,exports.useLenis=function(e,r,t){void 0===r&&(r=[]),void 0===t&&(t=0);var o,a,u=(o=n.useContext(s),a=d(),null!=o?o:a),i=u.lenis,c=u.addCallback,f=u.removeCallback;return n.useEffect(function(){if(e&&c&&f&&i)return c(e,t),e(i),function(){f(e)}},[i,c,f,t].concat(r)),i};
//# sourceMappingURL=react-lenis.js.map
