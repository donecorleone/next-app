import{useFrame as r}from"@studio-freight/hamo";import t from"@studio-freight/lenis";import n from"prop-types";import o,{createContext as e,forwardRef as i,useRef as a,useState as c,useCallback as u,useImperativeHandle as l,useEffect as f,useContext as s}from"react";import{create as d}from"zustand";function p(){return p=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},p.apply(this,arguments)}var v=["children","root","options","autoRaf","rafPriority"],m=e(),b=d(function(){return{}});function y(r,t,n){void 0===t&&(t=[]),void 0===n&&(n=0);var o,e,i=(o=s(m),e=b(),null!=o?o:e),a=i.lenis,c=i.addCallback,u=i.removeCallback;return f(function(){if(r&&c&&u&&a)return c(r,n),r(a),function(){u(r)}},[a,c,u,n].concat(t)),a}var h=i(function(n,e){var i=n.children,s=n.root,d=void 0!==s&&s,y=n.options,h=void 0===y?{}:y,k=n.autoRaf,g=void 0===k||k,O=n.rafPriority,C=void 0===O?0:O,j=function(r,t){if(null==r)return{};var n,o,e={},i=Object.keys(r);for(o=0;o<i.length;o++)t.indexOf(n=i[o])>=0||(e[n]=r[n]);return e}(n,v),P=a(),R=a(),w=c(),E=w[0],x=w[1],L=a([]),N=u(function(r,t){L.current.push({callback:r,priority:t}),L.current.sort(function(r,t){return r.priority-t.priority})},[]),S=u(function(r){L.current=L.current.filter(function(t){return t.callback!==r})},[]);l(e,function(){return E},[E]),f(function(){var r=new t(p({},h,!d&&{wrapper:P.current,content:R.current}));return x(r),function(){r.destroy(),x(void 0)}},[d,JSON.stringify(h)]),r(function(r){g&&(null==E||E.raf(r))},C),f(function(){d&&E&&b.setState({lenis:E,addCallback:N,removeCallback:S})},[d,E,N,S]);var z=u(function(r){for(var t=0;t<L.current.length;t++)L.current[t].callback(r)},[]);return f(function(){if(E)return E.on("scroll",z),function(){E.off("scroll",z)}},[E,z]),/*#__PURE__*/o.createElement(m.Provider,{value:{lenis:E,addCallback:N,removeCallback:S}},d?i:/*#__PURE__*/o.createElement("div",p({ref:P},j),/*#__PURE__*/o.createElement("div",{ref:R},i)))});h.displayName="ReactLenis",h.propTypes={children:n.node,root:n.bool,options:n.object,autoRaf:n.bool,rafPriority:n.number};export{h as Lenis,m as LenisContext,h as ReactLenis,y as useLenis};
//# sourceMappingURL=react-lenis.mjs.map
